"use strict";exports.id=977,exports.ids=[977],exports.modules={8197:(e,t,a)=>{a.d(t,{Z:()=>s});let s={src:"/_next/static/media/5.83785ecf.png",height:130,width:161,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAdklEQVR42mNABufWTGNmwAVOLelmAdEXN80TOb92ehuK5PXdq5jBkhvmGAAlC8+unHwBxD84MZ8JrOD8upme51ZPXXp+7YxCoILTFzbM9oRayQJWcHP/evazqyYvBypYeGXbYpf///8zgiWgxsI5lzbPF0d3GwB/GDT0VDm85AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6}},4433:(e,t,a)=>{a.d(t,{Z:()=>s});let s={src:"/_next/static/media/766.8dd21477.png",height:471,width:519,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAuklEQVR42gGvAFD/AJi2vYurtlF9joGdrZilsZiEeX2JmERdcgB/pqxTd4Bac4Kbv9Ggw9KOobByjqRObYUAcZifU36OfK2/sL7MrKu4j73RdJmvVGd+AHWZpFJ9joS1yKqyvMCxupHC12aKpUxddgCkw81/oKuRp7lidoJ5lJ18lKZlhqZMZIAAWY+fkKm109zkjoaIVERLTEVQV2yETmV9ABxqhHCEj9Hc44SUq3mLonuOqGZ7lVZne6y/XYkraOh0AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7}},2621:(e,t,a)=>{a.d(t,{Z:()=>s});let s={src:"/_next/static/media/ssss.8b715ff2.png",height:114,width:277,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAAYElEQVR4nGN8NylThImRUYbx31/O/79/cPxnZGBgZGRmYGRm/fCLlesB4+uZpZ6sX15vYP77i+0/AxJgZGT4w8E/lZHh/3/G95PSnZl+fVcACv4BGsAAVPgPRP1l5zkLAHdVIJtufdzqAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3}},2896:(e,t,a)=>{a.d(t,{Z:()=>c});var s=a(1185),l=a.n(s);let n=process.env.MONGO_URI;if(!n)throw Error("Please define the MONGO_URI variable for the MongoDB connection.");let o=global.mongo;async function r(){return o.conn||(o.promise||(o.promise=l().connect(n,{bufferCommands:!1}).then(e=>(console.log("MongoDB connected"),e))),o.conn=await o.promise),o.conn}o||(o=global.mongo={conn:null,promise:null});let i=new(a(5352)).Server({port:8080}),d={};i.on("connection",e=>{e.on("message",t=>{let a=JSON.parse(t);switch(a.type){case"join":let{roomId:s}=a;d[s]||(d[s]=[]),d[s].push(e);break;case"offer":case"answer":case"candidate":let l=d[a.roomId];l&&l.forEach(t=>{t!==e&&t.send(JSON.stringify(a))})}}),e.on("close",()=>{for(let t in d)d[t]=d[t].filter(t=>t!==e)})}),console.log("Signaling server is running on ws://localhost:8080");let c=r},2761:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>d});var l=a(6131),n=a(1185),o=a.n(n),r=e([l]);l=(r.then?(await r)():r)[0];let i=new(o()).Schema({doctor:{type:String,required:!0},patient:{type:String,required:!0},date:{type:Date,required:!0},time:{type:String,required:!0},meetingID:{type:String,required:!0},status:{type:String,default:"Pending"}},{timestamps:!0}),d=o().models.Appointment||o().model("Appointment",i);s()}catch(e){s(e)}})},6131:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>x});var l=a(997);a(4542);var n=a(6689),o=a(2418),r=a(1163),i=a(5675),d=a.n(i),c=a(2621),m=a(4433),h=a(8197),g=a(3121),u=e([o,g]);[o,g]=u.then?(await u)():u;let x=()=>{let e=(0,r.useRouter)(),[t,a]=(0,n.useState)([]),[s,i]=(0,n.useState)(""),[u,x]=(0,n.useState)([]),[p,A]=(0,n.useState)(!1),[b,f]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/book"),t=await e.json();if(e.ok){let e=t.map(e=>({...e,meetingId:e.meetingID}));a(e)}else console.error("Failed to fetch appointments:",t.message)}catch(e){console.error("Error fetching appointments:",e)}})()},[]);let j=t=>{e.push(`/meet/${t}`),console.log(`Navigating to meeting with ID: ${t}`)},y=async e=>{try{await fetch(`/api/book?id=${e}`,{method:"DELETE"}),x(u.filter(t=>t._id!==e)),f("Appointment has been canceled successfully."),1===u.length&&A(!1)}catch(e){console.error("Error cancelling booking:",e),f("Error cancelling the appointment.")}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"greenn min-h-screen relative",children:[l.jsx(o.Z,{className:"fixed top-0 w-full bg-white shadow-md"}),(0,l.jsxs)("div",{className:"pt-0  mr-28  ",children:[(0,l.jsxs)("div",{className:"relative pb-44 mr-24 mt-6  w-full h-screen flex justify-end items-center","data-aos":"zoom-in","data-aos-delay":"200","data-aos-easing":"ease-in-out","data-aos-duration":"1100",children:[l.jsx("div",{className:" hidden sm:block md:block absolute  h-[28rem] w-[28rem]  orangg rounded-full z-0 right-0"}),l.jsx("div",{className:" hidden sm:block md:block absolute h-[27rem] w-[27rem] mr-2 rounded-full overflow-hidden shadow-lg ",children:l.jsx(d(),{src:m.Z,alt:"Doctor",className:"h-full w-full object-cover"})}),l.jsx("div",{className:" hidden sm:block md:block absolute mt-72 mr-72 h-[14.5rem] w-[14.5rem]  orangg rounded-full clip-half z-0 right-0"}),l.jsx("div",{className:" hidden sm:block md:block absolute mt-72 mb-2 ml-5 mr-72 h-[14rem] w-[14rem] rounded-full overflow-hidden shadow-lg ",children:l.jsx(d(),{src:m.Z,alt:"Doctor",className:"h-full w-full object-cover"})})]}),l.jsx(d(),{src:h.Z,className:"absolute inset-0 w-36 h-32 opacity-50 md:ml-16 mt-28","data-aos":"zoom-in","data-aos-delay":"200","data-aos-easing":"ease-in-out","data-aos-duration":"2000"}),(0,l.jsxs)("div",{className:"mt-48 ml-20 md:ml-52 py-10 absolute inset-0","data-aos":"fade-down","data-aos-delay":"200","data-aos-easing":"ease-in-out","data-aos-duration":"1100",children:[p?(0,l.jsxs)(l.Fragment,{children:[l.jsx("h2",{className:"md:text-5xl text-4xl font-serif orangg-text mb-8",children:"Your Appointments"}),u.length>0?l.jsx("div",{className:"overflow-x-auto mr-10 md:mr-0 md:pr-4",children:(0,l.jsxs)("table",{className:"md:w-96 bg-white bg-opacity-70 rounded-lg shadow-sm shadow-gray-400","data-aos":"fade-up","data-aos-delay":"200","data-aos-easing":"ease-in-out","data-aos-duration":"700",children:[l.jsx("thead",{children:(0,l.jsxs)("tr",{className:" bg-orange-500 bg-opacity-60  text-gray-800",children:[l.jsx("th",{className:"py-2 px-7 ml-4 ",children:"Doctor Name"}),l.jsx("th",{className:"py-2 px-4 hidden sm:block",children:"Specialization"}),l.jsx("th",{className:"py-2 px-4 ",children:"Date"}),l.jsx("th",{className:"py-2 px-4 ",children:"Time"}),l.jsx("th",{className:"py-2 px-4 ",children:"Meet"}),l.jsx("th",{className:"py-2 px-4 ",children:"Action"}),"                      "]})}),l.jsx("tbody",{children:u.map((e,t)=>(0,l.jsxs)("tr",{className:"hover:bg-gray-100 hover:bg-op",children:[l.jsx("td",{className:"py-2 px-4 mr-10 ml-5 ",children:e.doctor.name}),l.jsx("td",{className:"py-2 px-4 hidden sm:block",children:e.doctor.specialization}),l.jsx("td",{className:"py-2 px-4 ",children:new Date(e.date).toLocaleDateString()}),l.jsx("td",{className:"py-2 px-4 ",children:e.time}),l.jsx("td",{className:"py-2 px-4 ",children:l.jsx("button",{onClick:()=>j(e.meetingId),className:"text-blue-500 hover:underline",children:"Join"})}),l.jsx("td",{children:l.jsx("button",{onClick:()=>y(e._id),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 focus:outline-none",children:"Cancel"})})]},t))})]})}):l.jsx("p",{className:"text-lg text-gray-200",children:"No appointments found for this mobile number."})]}):(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=t.filter(e=>e.phoneNumber===s);x(a),A(!0)},className:"mb-8 w-3/4",children:[l.jsx("h1",{className:"mb-5 fontt text-4xl sm:text-4xl md:text-5xl lg:text-6xl font-serif orangg-text",children:"Check Appointment"}),l.jsx("h1",{className:"mb-8 fontt text-3xl sm:text-4xl md:text-5xl lg:text-5xl font-serif text-gray-300",children:"Enter Your Number"}),l.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg shadow-lg flex space-x-3 w-96",children:l.jsx("input",{type:"tel",value:s,onChange:e=>i(e.target.value),placeholder:"Mobile Number",className:"border border-gray-300 rounded-l-lg p-3 w-full sm:w-80 md:w-96 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})}),(0,l.jsxs)("div",{className:"relative mt-7 ",children:[l.jsx(d(),{src:c.Z,alt:"Submit",className:"h-11 md:h-11 w-48 ml-24 object-cover"}),l.jsx("button",{className:"absolute inset-0 md:mr-96 md:pr-60 ml-14 md:ml-7 text-white font-bold text-lg md:text-xl",type:"submit",children:"Submit"})]})]}),b&&l.jsx("p",{className:"mt-4 text-lg text-red-500",children:b})]})]})]}),l.jsx(g.Z,{})]})};s()}catch(e){s(e)}})}};