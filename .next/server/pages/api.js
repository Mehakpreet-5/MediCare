"use strict";(()=>{var e={};e.id=237,e.ids=[237],e.modules={8197:(e,t,a)=>{a.d(t,{Z:()=>s});let s={src:"/_next/static/media/5.83785ecf.png",height:130,width:161,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAdklEQVR42mNABufWTGNmwAVOLelmAdEXN80TOb92ehuK5PXdq5jBkhvmGAAlC8+unHwBxD84MZ8JrOD8upme51ZPXXp+7YxCoILTFzbM9oRayQJWcHP/evazqyYvBypYeGXbYpf///8zgiWgxsI5lzbPF0d3GwB/GDT0VDm85AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6}},4433:(e,t,a)=>{a.d(t,{Z:()=>s});let s={src:"/_next/static/media/766.8dd21477.png",height:471,width:519,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAuklEQVR42gGvAFD/AJi2vYurtlF9joGdrZilsZiEeX2JmERdcgB/pqxTd4Bac4Kbv9Ggw9KOobByjqRObYUAcZifU36OfK2/sL7MrKu4j73RdJmvVGd+AHWZpFJ9joS1yKqyvMCxupHC12aKpUxddgCkw81/oKuRp7lidoJ5lJ18lKZlhqZMZIAAWY+fkKm109zkjoaIVERLTEVQV2yETmV9ABxqhHCEj9Hc44SUq3mLonuOqGZ7lVZne6y/XYkraOh0AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7}},2621:(e,t,a)=>{a.d(t,{Z:()=>s});let s={src:"/_next/static/media/ssss.8b715ff2.png",height:114,width:277,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAAYElEQVR4nGN8NylThImRUYbx31/O/79/cPxnZGBgZGRmYGRm/fCLlesB4+uZpZ6sX15vYP77i+0/AxJgZGT4w8E/lZHh/3/G95PSnZl+fVcACv4BGsAAVPgPRP1l5zkLAHdVIJtufdzqAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3}},4701:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>c,default:()=>d,routeModule:()=>m});var r=a(3105),l=a(5244),o=a(1323),n=a(2567),i=e([n]);n=(i.then?(await i)():i)[0];let d=(0,o.l)(n,"default"),c=(0,o.l)(n,"config"),m=new r.PagesAPIRouteModule({definition:{kind:l.x.PAGES_API,page:"/api",pathname:"/api",bundlePath:"",filename:""},userland:n});s()}catch(e){s(e)}})},2896:(e,t,a)=>{a.d(t,{Z:()=>c});var s=a(1185),r=a.n(s);let l=process.env.MONGO_URI;if(!l)throw Error("Please define the MONGO_URI variable for the MongoDB connection.");let o=global.mongo;async function n(){return o.conn||(o.promise||(o.promise=r().connect(l,{bufferCommands:!1}).then(e=>(console.log("MongoDB connected"),e))),o.conn=await o.promise),o.conn}o||(o=global.mongo={conn:null,promise:null});let i=new(a(5352)).Server({port:8080}),d={};i.on("connection",e=>{e.on("message",t=>{let a=JSON.parse(t);switch(a.type){case"join":let{roomId:s}=a;d[s]||(d[s]=[]),d[s].push(e);break;case"offer":case"answer":case"candidate":let r=d[a.roomId];r&&r.forEach(t=>{t!==e&&t.send(JSON.stringify(a))})}}),e.on("close",()=>{for(let t in d)d[t]=d[t].filter(t=>t!==e)})}),console.log("Signaling server is running on ws://localhost:8080");let c=n},515:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>d});var r=a(6131),l=a(1185),o=a.n(l),n=e([r]);r=(n.then?(await n)():n)[0];let i=new(o()).Schema({doctor:{type:String,required:!0},patient:{type:String,required:!0},date:{type:Date,required:!0},time:{type:String,required:!0},meetingID:{type:String,required:!0},status:{type:String,default:"Pending"}},{timestamps:!0}),d=o().models.Appointment||o().model("Appointment",i);s()}catch(e){s(e)}})},6131:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>x});var r=a(997);a(4542);var l=a(6689),o=a(2418),n=a(1163),i=a(5675),d=a.n(i),c=a(2621),m=a(4433),u=a(8197),h=a(3121),p=e([o,h]);[o,h]=p.then?(await p)():p;let x=()=>{let e=(0,n.useRouter)(),[t,a]=(0,l.useState)([]),[s,i]=(0,l.useState)(""),[p,x]=(0,l.useState)([]),[g,A]=(0,l.useState)(!1),[b,f]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/book"),t=await e.json();if(e.ok){let e=t.map(e=>({...e,meetingId:e.meetingID}));a(e)}else console.error("Failed to fetch appointments:",t.message)}catch(e){console.error("Error fetching appointments:",e)}})()},[]);let w=t=>{e.push(`/meet/${t}`),console.log(`Navigating to meeting with ID: ${t}`)},j=async e=>{try{await fetch(`/api/book?id=${e}`,{method:"DELETE"}),x(p.filter(t=>t._id!==e)),f("Appointment has been canceled successfully."),1===p.length&&A(!1)}catch(e){console.error("Error cancelling booking:",e),f("Error cancelling the appointment.")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"greenn min-h-screen relative",children:[r.jsx(o.Z,{className:"fixed top-0 w-full bg-white shadow-md"}),(0,r.jsxs)("div",{className:"pt-0  mr-28  ",children:[(0,r.jsxs)("div",{className:"relative pb-44 mr-24 mt-6  w-full h-screen flex justify-end items-center","data-aos":"zoom-in","data-aos-delay":"200","data-aos-easing":"ease-in-out","data-aos-duration":"1100",children:[r.jsx("div",{className:" hidden sm:block md:block absolute  h-[28rem] w-[28rem]  orangg rounded-full z-0 right-0"}),r.jsx("div",{className:" hidden sm:block md:block absolute h-[27rem] w-[27rem] mr-2 rounded-full overflow-hidden shadow-lg ",children:r.jsx(d(),{src:m.Z,alt:"Doctor",className:"h-full w-full object-cover"})}),r.jsx("div",{className:" hidden sm:block md:block absolute mt-72 mr-72 h-[14.5rem] w-[14.5rem]  orangg rounded-full clip-half z-0 right-0"}),r.jsx("div",{className:" hidden sm:block md:block absolute mt-72 mb-2 ml-5 mr-72 h-[14rem] w-[14rem] rounded-full overflow-hidden shadow-lg ",children:r.jsx(d(),{src:m.Z,alt:"Doctor",className:"h-full w-full object-cover"})})]}),r.jsx(d(),{src:u.Z,className:"absolute inset-0 w-36 h-32 opacity-50 md:ml-16 mt-28","data-aos":"zoom-in","data-aos-delay":"200","data-aos-easing":"ease-in-out","data-aos-duration":"2000"}),(0,r.jsxs)("div",{className:"mt-48 ml-20 md:ml-52 py-10 absolute inset-0","data-aos":"fade-down","data-aos-delay":"200","data-aos-easing":"ease-in-out","data-aos-duration":"1100",children:[g?(0,r.jsxs)(r.Fragment,{children:[r.jsx("h2",{className:"md:text-5xl text-4xl font-serif orangg-text mb-8",children:"Your Appointments"}),p.length>0?r.jsx("div",{className:"overflow-x-auto mr-10 md:mr-0 md:pr-4",children:(0,r.jsxs)("table",{className:"md:w-96 bg-white bg-opacity-70 rounded-lg shadow-sm shadow-gray-400","data-aos":"fade-up","data-aos-delay":"200","data-aos-easing":"ease-in-out","data-aos-duration":"700",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:" bg-orange-500 bg-opacity-60  text-gray-800",children:[r.jsx("th",{className:"py-2 px-7 ml-4 ",children:"Doctor Name"}),r.jsx("th",{className:"py-2 px-4 hidden sm:block",children:"Specialization"}),r.jsx("th",{className:"py-2 px-4 ",children:"Date"}),r.jsx("th",{className:"py-2 px-4 ",children:"Time"}),r.jsx("th",{className:"py-2 px-4 ",children:"Meet"}),r.jsx("th",{className:"py-2 px-4 ",children:"Action"}),"                      "]})}),r.jsx("tbody",{children:p.map((e,t)=>(0,r.jsxs)("tr",{className:"hover:bg-gray-100 hover:bg-op",children:[r.jsx("td",{className:"py-2 px-4 mr-10 ml-5 ",children:e.doctor.name}),r.jsx("td",{className:"py-2 px-4 hidden sm:block",children:e.doctor.specialization}),r.jsx("td",{className:"py-2 px-4 ",children:new Date(e.date).toLocaleDateString()}),r.jsx("td",{className:"py-2 px-4 ",children:e.time}),r.jsx("td",{className:"py-2 px-4 ",children:r.jsx("button",{onClick:()=>w(e.meetingId),className:"text-blue-500 hover:underline",children:"Join"})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>j(e._id),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 focus:outline-none",children:"Cancel"})})]},t))})]})}):r.jsx("p",{className:"text-lg text-gray-200",children:"No appointments found for this mobile number."})]}):(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=t.filter(e=>e.phoneNumber===s);x(a),A(!0)},className:"mb-8 w-3/4",children:[r.jsx("h1",{className:"mb-5 fontt text-4xl sm:text-4xl md:text-5xl lg:text-6xl font-serif orangg-text",children:"Check Appointment"}),r.jsx("h1",{className:"mb-8 fontt text-3xl sm:text-4xl md:text-5xl lg:text-5xl font-serif text-gray-300",children:"Enter Your Number"}),r.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg shadow-lg flex space-x-3 w-96",children:r.jsx("input",{type:"tel",value:s,onChange:e=>i(e.target.value),placeholder:"Mobile Number",className:"border border-gray-300 rounded-l-lg p-3 w-full sm:w-80 md:w-96 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})}),(0,r.jsxs)("div",{className:"relative mt-7 ",children:[r.jsx(d(),{src:c.Z,alt:"Submit",className:"h-11 md:h-11 w-48 ml-24 object-cover"}),r.jsx("button",{className:"absolute inset-0 md:mr-96 md:pr-60 ml-14 md:ml-7 text-white font-bold text-lg md:text-xl",type:"submit",children:"Submit"})]})]}),b&&r.jsx("p",{className:"mt-4 text-lg text-red-500",children:b})]})]})]}),r.jsx(h.Z,{})]})};s()}catch(e){s(e)}})},2567:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>n});var r=a(2896),l=a(515),o=e([l]);async function n(e,t){if(await (0,r.Z)(),"GET"===e.method){let e=await l.Z.find({});return t.status(200).json(e)}if("POST"===e.method){let{doctor:a,patient:s,date:r,time:o}=e.body,n=new l.Z({doctor:a,patient:s,date:r,time:o});return await n.save(),t.status(201).json(n)}}l=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})},3105:(e,t,a)=>{e.exports=a(145)},7197:e=>{e.exports=require("@fortawesome/react-fontawesome")},1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5352:e=>{e.exports=require("ws")},303:e=>{e.exports=import("@fortawesome/free-brands-svg-icons")},4563:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},7147:e=>{e.exports=require("fs")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[309,633,664,163,675,839],()=>a(4701));module.exports=s})();