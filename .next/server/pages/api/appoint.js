"use strict";(()=>{var e={};e.id=562,e.ids=[562],e.modules={1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5352:e=>{e.exports=require("ws")},6249:(e,n)=>{Object.defineProperty(n,"l",{enumerable:!0,get:function(){return function e(n,o){return o in n?n[o]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,o)):"function"==typeof n&&"default"===o?n:void 0}}})},3098:(e,n,o)=>{o.r(n),o.d(n,{config:()=>c,default:()=>u,routeModule:()=>p});var r={};o.r(r),o.d(r,{default:()=>d});var t=o(1802),i=o(7153),a=o(6249),s=o(9188),l=o(8946);async function d(e,n){if(await (0,s.Z)(),console.log("Booking model:",l.Z),"POST"===e.method)try{let o=e.body,r=new l.Z(o);await r.save(),n.status(201).json({message:"Booking confirmed!",booking:r})}catch(e){n.status(500).json({message:"Error saving booking",error:e})}else n.setHeader("Allow",["POST"]),console.error("Error saving booking:",error),n.status(405).end(`Method ${e.method} Not Allowed`)}let u=(0,a.l)(r,"default"),c=(0,a.l)(r,"config"),p=new t.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/appoint",pathname:"/api/appoint",bundlePath:"",filename:""},userland:r})},9188:(e,n,o)=>{o.d(n,{Z:()=>u});var r=o(1185),t=o.n(r);let i=process.env.MONGO_URI;if(!i)throw Error("Please define the MONGO_URI variable for the MongoDB connection.");let a=global.mongo;async function s(){return a.conn||(a.promise||(a.promise=t().connect(i,{bufferCommands:!1}).then(e=>(console.log("MongoDB connected"),e))),a.conn=await a.promise),a.conn}a||(a=global.mongo={conn:null,promise:null});let l=new(o(5352)).Server({port:8080}),d={};l.on("connection",e=>{e.on("message",n=>{let o=JSON.parse(n);switch(o.type){case"join":let{roomId:r}=o;d[r]||(d[r]=[]),d[r].push(e);break;case"offer":case"answer":case"candidate":let t=d[o.roomId];t&&t.forEach(n=>{n!==e&&n.send(JSON.stringify(o))})}}),e.on("close",()=>{for(let n in d)d[n]=d[n].filter(n=>n!==e)})}),console.log("Signaling server is running on ws://localhost:8080");let u=s},8946:(e,n,o)=>{o.d(n,{Z:()=>a});var r=o(1185),t=o.n(r);let i=new(t()).Schema({name:{type:String,required:!0},phoneNumber:{type:String,required:!0},date:{type:Date,required:!0},time:{type:String,required:!0},message:{type:String},meetingID:{type:String,required:!0},doctor:{name:{type:String,required:!0},specialization:{type:String,required:!0},experience:{type:Number,required:!0},availability:{type:String,required:!0}}}),a=t().models.Booking||t().model("Booking",i)},7153:(e,n)=>{var o;Object.defineProperty(n,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},1802:(e,n,o)=>{e.exports=o(145)}};var n=require("../../webpack-api-runtime.js");n.C(e);var o=n(n.s=3098);module.exports=o})();